### Шаг 1: Установка необходимых приложений

1. **Откройте терминал**.
    
2. Убедитесь, что у вас установлены OpenSSH. Выполните команду:
    
    ```bash
    sudo apt update
    sudo apt install openssh-client openssh-server
    ```
    
3. Проверьте, что SSH установлен:
    
    ```bash
    ssh -V
    ```
    
    Вы должны увидеть версию SSH.
    

# Шаг 2: Генерация SSH-ключей

1. Создайте директорию для хранения ключей, если она ещё не существует:
    
    ```bash
    mkdir -p ~/.ssh/tms
    ```
    
2. Сгенерируйте ключи с помощью команды `ssh-keygen`. Укажите путь к файлу для сохранения ключей:
    
    ```bash
    ssh-keygen -t rsa -b 4096 -f ~/.ssh/tms/id_rsa
    ```
    
    - `-t rsa` указывает тип ключа (RSA).
    - `-b 4096` задаёт длину ключа (4096 бит).
    - `-f ~/.ssh/tms/id_rsa` задаёт путь к файлу.
3. Вам будет предложено ввести пароль для ключа (необязательно, но рекомендуется для дополнительной безопасности). После этого ключи будут сгенерированы.
    

# Шаг 3: Проверка сгенерированных ключей

Проверьте, что ключи созданы:

```bash
ls ~/.ssh/tms/
```

![[Pasted image 20241006121539.png]]

Вы должны увидеть файлы `id_rsa` (приватный ключ) и `id_rsa.pub` (публичный ключ).

# Шаг 4: Добавление приватного ключа в ssh-agent

1. Запустите ssh-agent:
    
    ```bash
    eval "$(ssh-agent -s)"
    ```
    
2. Добавьте ваш приватный ключ в ssh-agent:
    
    ```bash
    ssh-add ~/.ssh/tms/id_rsa
    ```
    

# Шаг 5: Копирование публичного ключа на удалённый сервер

1. Скопируйте публичный ключ на удалённый сервер с помощью команды `ssh-copy-id`. Замените `user` и `remote_host` на имя пользователя и адрес вашего удалённого сервера:
    
    ```bash
    ssh-copy-id -i ~/.ssh/tms/id_rsa.pub user@remote_host
    ```
    
    Вам будет предложено ввести пароль для удалённого пользователя.
![[Pasted image 20241006121557.png]]

2. После успешного выполнения этой команды, ваш публичный ключ будет добавлен в файл `~/.ssh/authorized_keys` на удалённом сервере.

# Шаг 6: Проверка подключения

Попробуйте подключиться к удалённому серверу с помощью SSH:

```bash
ssh user@remote_host
```

![[Pasted image 20241006121622.png]]

Если всё настроено правильно, вы должны войти на сервер без запроса пароля (если вы не устанавливали пароль для ключа).

# Шаг 7: Использование SCP для копирования файлов

Теперь вы можете использовать SCP для копирования файлов на удалённый сервер. Например, чтобы скопировать файл `file.txt`:

```bash
scp file.txt user@remote_host:/path/to/destination/
```

# Заключение

Теперь вы успешно сгенерировали SSH-ключи, добавили их в ssh-agent и скопировали публичный ключ на удалённый сервер. Вы также узнали, как использовать SCP для передачи файлов.