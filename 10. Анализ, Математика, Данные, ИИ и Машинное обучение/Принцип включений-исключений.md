## Принцип включений-исключений

**Принципом включений-исключений** (англ. inclusion-exclusion principle) называется *техника подсчёта мощности объединения* `n` *множеств* `| A1 ∪ A2 ∪ ... ∪ An |` *сложением мощностей всех множеств* `|A1| + |A2| + ... + |An|` и *исключением из* этой *суммы* всего *лишнего*: *элементы* из *пересечений* некоторых *множеств* вошли *в сумму несколько раз*.

В простейшем случае, когда *объединяются два множеств* `A` и `B`, применение *принципа включений-исключений* имеет вид:  
`|A ∪ B| = |A| + |B| - |A ∩ B|`.  

Если множества `A` и `B` *пересекаются*, то *каждое* из множеств *содержит* в себе *пересечение* `A ∩ B`, которое *при сложении* `|A| + |B|` *учитывается дважды* и поэтому *одно* из *пересечений* необходимо *исключить* из *рассчёта*.

В случае *трёх множеств* `A, B, C` применение *принципа включений-исключений* имёт вид:  
`|A ∪ B ∪ C| = |A| + |B| + |C| - |A ∩ B| - |A ∩ C| - |B ∩ C| + |A ∩ B ∩ C|`.

Сперва *включается всё*, затем *исключается всё лишнее* (*лишние пересечения*), затем *включается ошибочно исключённое*.

Для *большего числа множеств*, например, `A1, A2, ..., An` *алгоритм применения принципа включения-исключения* следующий:
1) *Включаем мощность кадого множества*:  
`|A1| + |A2| + ... + |An|`.
1) *Исключаем мощность каждого объединения двух множеств*:  
`- |A1 ∩ A2| - |A1 ∩ A3| - ...`.
1) *Включаем мощность каждого объединения трёх множеств*:  
`+ |A1 ∩ A2 ∩ A3| + |A1 ∩ A2 ∩ A4| + ...`.
1) *Исключаем мощность каждого объединения четырёх множеств*:  
`- |A1 ∩ A2 ∩ A3 ∩ A4| - |A1 ∩ A2 ∩ A3 ∩ A5| - ...`
1) И так далее *включаем-исключаем-включаем-исключаем* `n` *раз*.


