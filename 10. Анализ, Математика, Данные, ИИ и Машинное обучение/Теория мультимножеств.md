# Теория мультимножеств

## Мультимножество

Понятие *мультимножества* получено *исключением* из понятия *множества требования уникальности* элементов.

**Мультимножеством** (англ. multiset, bag) называют *неупорядоченный набор объектов* (*не обязательно уникальных*), *обладающих схожими признаками*.

*Обозначение мультимножества совпадает* с *обозначением множества*. Примеры *мультимножеств*: `{ 3, 2, 2 }`, `{ белый, красный, белый }`.

## Основные понятия теории мультимножеств

### Множественность элемента

**Множественностью** (англ. multiplicity) **элемента `x` в мультимножестве `A`** называется *число вхождений элемента* `x` в *мультимножество* `A`. 

Например, в *мультимножестве* `{ x, x, y, z, z, z }`: *элемент* `x` имеет *множественность* `2`, *элемент* `y` - *множественность* `1`, *элемент* `z` - *множественность* `3`.

### Представление мультимножества как множества

*Мультимножество* можно *определить* как *множество особой структуры*.

**Мультимножеством `A`** называют *множество упорядоченных пар* `(x, m(x))` вида `{ (x1, m(x1)), (x2, m(x2)), ..., (xn, m(xn)) }`, где `x` - *элемент мультимножества*, а `m(x)` - *множественность элемента* `x`.

При *таком определении мультимножества*, *мультимножество* `{ x, x, y, z, z, z }` можно *представить* в *виде* `{ (x, 2), (y, 1), (z, 3) }`, что достаточно *удобно*.

*Существует* другое, *интуитивное обозначение*: `{ x1^m(x1), x2^m(x2), ..., xn^m(xn) }`. Пример: `{ x, x, y, z, z, z } = { x^2, y, z^3 }`.


### Функция множественности

Функция `m(x)`, отображающая *элементы мультимножества* в *целые неотрицательные числа* (`m: A → Z+`), называется **функцией множественности** (англ. multiplicity function).

*Добавим* *дополнительный аргумент* в *функию множественности*: `m(x, A)`, где `A` - *название мультимножества*, которому *принадлежит элемент* `x`. Это позволит нам *различать множественность* одних и *тех же элементов* в *разных множествах* и при этом *не задавать каждый раз новую функцию* (`m: A → Z+`, `m: B → Z+` и так далее)

Например, если `A = { y, y, y }` и `B = { x, y }`, тогда `m(y, A) = 3`, `m(y, B) = 1`, `m(x, A) = 0`, `m(x, B) = 1`.

### Принадлежность элемента мультимножеству

**Элемент `x` принадлежит мультимножеству** (*содержится в мультимножестве*) **`A`**, если `m(x, A) > 0`. *Обозначение*: `x ∈ A`.

**Элемент `x` не приналежит мультимножеству** (*не содержится в мультимножестве*) **`A`**, если `m(x, A) = 0`. *Обозначение*: `x ∉ A`.

### Мощность (кардинальность) мультимножества

**Мощностью** или **кардинальностью** (англ. cardinality) **мультимножества** `A` называют *число всех элементов* мультимножества `A`, *включающее* так же *все повторения* этих *элементов*. Иначе говоря, *кардинальностью* называют *сумму* *множественностей всех элементов мультимножества* `A`: `|A| = Σ m(x,A), x ∈ A`.


*Кардинальность мультимножества* `A` *обозначается*: `|A| = z`, где `z` - *неотрицательное целое число*.

Например, *мультимножество* `A = { y, z, x, y, z }` имеет *кардинальность* `|A| = m(x) + m(y) + m(z) = 1 + 2 + 2 = 5`.


### Саппорт мультимножества

**Саппортом** (англ. support) **мультимножества** `A` называют *множество уникальных элементов* мультимножества `A`.

Обозначение *саппорта мультимножества* `A`:  
`Supp(A) = { x ∈ U ∣ m(x, A) > 0 }`.

Пусть `A = { x, x, x, y, y, z }`, тогда его *саппорт*: `Supp(A) = { x, y, z }`.

## Число мультимножеств

Вообще говоря, **число мультимножеств** для **любого непустого конечного множества** `A` **бесконечно**.

Например, для *множества* `{ x }` существует *бесконечное число мультимножеств*: `{ x, x }`, `{ x, x, x }`, `{ x, x, x, ..., x }`.

**Число мультимножеств** (англ. multiset number) **мощности `k`**, состоящих **из элементов** некоторого **множества `A` мощности `n`** *обозначается* `(( n k ))` и *равняется числу подмножеств мощности* `k` в некотором *множестве мощности* `n + k - 1`, то есть:  
**`(( n k )) = C(n + k - 1, k)  = (n + k - 1)! ÷ (k!(n - 1)!)`**.

Обозначение `(( n k ))` *читается* как *“множественный выбор `k` из `n`”* (англ. n multichoose k).

Например, если `A = { ежевика, голубика, черника }`, тогда `(( 3 2 )) = C(4, 2)  = 4! ÷ (2!2!) = (3 • 4) ÷ 2 = 6` *мультимножеств*: `{ ежевика, ежевика }`, `{ ежевика, голубика }`, `{ ежевика, черника }`, `{ голубика, голубика }`, `{ голубика, черника }`, `{ черника, черника }`.

## Отношения между мультимножествами

### Пересечение мультимножеств

**Мультимножества `A` и `B` пересекаются**, если они *имеют одинаковые элементы* и *не обязательно одинаковые множественности* этих *элементов*.

### Равенство мультимножеств

**Мультимножеств `A` и `B` равны** , если *совпадают все элементы* этих *мультимножеств*, а также *множественности каждого* отдельно взятого *элемента*, *в противном случае* **мультимножества `A` и `B` не равны**.

### Включение мультимножества

Говорят, что **мультимножество `A` включено в мультимножество `B`** (англ. `A` included in `B`), если `Supp(A) ⊆ Supp(B)` и для *любого элемента* `x ∈ A` *выполняется* `m(x, A) <= m(x, B)`, то есть если *каждый элемент* `x` мультимножества `A` *содержится* в мультимножестве `B` и его *множественность* в `A` *меньше*, чем в `B`.

*Существует* так же *краткая версия определения* с использованием *универсального множества* `U`.

Говорят, что **мультимножество `A` включено в мультимножество `B`**, если для *любого элемента* `x ∈ U` *выполняется* `m(x, A) <= m(x, B)`, то есть *множественность любого элемента универсального множества* в `A` *меньше*, чем в `B`.


Обозначение *включения* `A` в `B`: `A ⊆ B`.

Например, если `A = { x, y }`, `B = { x, z }`, `C = { x, y, x }`, то `A ⊆ C`.

Для *любого мультимножества* `A` *выполняется* `Supp(A) ⊆ A`.


## Операции над мультимножествами
- [Пересечение мультимножеств](#пересечение-мультимножеств)
- [Объединение мультимножеств](#объединение-мультимножеств)
- [Сложение мультимножеств](#сложение-мультимножеств)



### Пересечение мультимножеств

**Пересечением** (англ. intersection) **мультимножеств `A` и `B`** называют такое *мультимножество* `C`, что для *любого* элемента `x ∈ U` *выполняется* `m(x, C) = min{ m(x, A), m(x, B) }`.

Например, `A = { x, y, y }` в *пересечении* с `B = { x, x, y, z }` даёт `C = { x, y }`.

```
A: { (x, 1), (y, 2), (z, 0) }
B: { (x, 2), (y, 1), (z, 1) }
C: { (x, 1), (y, 1), (z, 0) }
```

### Объединение мультимножеств

**Объединением** (англ. union) **мультимножеств `A` и `B`** называют такое *мультимножество* `C`, что для *любого* элемента `x ∈ U` *выполняется* `m(x, C) = max{ m(x, A), m(x, B) }`.

Например, `A = { x, y, y }` в *объединении* с `B = { x, x, y, z }` даёт `C = { x, x, y, y, z }`.

```
A: { (x, 1), (y, 2), (z, 0) }
B: { (x, 2), (y, 1), (z, 1) }
C: { (x, 2), (y, 2), (z, 1) }
```

### Сложение мультимножеств

**Сложением** (англ. sum) **мультимножеств `A` и `B`** называют такое *мультимножество* `C`, что для *любого* элемента `x ∈ U` *выполняется* `m(x, C) = m(x, A) + m(x, B)`.

Например, `A = { x, y, y }` при *сложении* с `B = { x, x, y, z }` даёт `C = { x, x, x, y, y, y, z }`.

```
A: { (x, 1), (y, 2), (z, 0) }
B: { (x, 2), (y, 1), (z, 1) }
C: { (x, 3), (y, 3), (z, 1) }
```


