
### О методе “звёзды и столбцы”

В комбинаторике **“звёзды и столбцы”** (англ. stars and bars) - это *графический метод доказательства* некоторых важных *комбинаторных теорем*, который получил *широкое распространение* благодаря *Уильяму Феллеру*.

*Метод* так же *подходит* для *решения* некоторых *классических комбинаторных задач*. Например, *размещение* `k` *одинаковых шаров* в `n` *различных лунках*.


### Теорема #1 (число композиций натурального числа n из k компонент)
«Для *любой пары натуральных чисел* `n` и `k` *число кортежей*, *состоящих* из *`k` натуральных чисел*, *сумма* которых даёт *`n`*, то есть **число композиций натурального числа `n` из `k` компонент** (англ. number of k-compositions), *равно числу подмножеств мощности* `k - 1`, *выбранных* из *множества мощности* `n - 1`, то есть *равно* **`C(n-1, k-1)`**.»

Например, для `n = 5` и `k = 2` существует `C(n-1, k-1) = C(4, 1) = 4` *композиции*:  
```
4 + 1
3 + 2
2 + 3
1 + 4
```

Например, для `n = 5` и `k = 3` существует `C(n-1, k-1) = C(4, 2) = 6` *композиций*:  
```
3 + 1 + 1
1 + 3 + 1
1 + 1 + 3
2 + 2 + 1
2 + 1 + 2
1 + 1 + 2
```

#### Доказательство методом “звёзды и столбцы”

Представим, что *натуральное число* `n` - это *число* каких-либо *объектов* (например, *звёзд* `★`). Тогда *число* `n = 5` будет *означать*, что *имеется набор объектов* `★★★★★`.

Для *составления композиции числа* `n = 5` из `k` *компонент*, необходимо *представить число* `5` в виде *суммы нескольких натуральных чисел*, что *эквивалентно разбиению набора* `★★★★★` на `k` *наборов меньшей длины*, *каждый* из которых *представляет* некоторое *натуральное число* и поэтому *должен содержать не менее одного объекта* `★`.

Будем *разбивать набор объектов столбцами* `|`. Тогда *композиция* `2 + 3` *эквивалентна* `★★|★★★`, *композиция* `3 + 1 + 1` *эквивалентна* `★★★|★|★` и так далее.

Можно заметить, что для *составления композиции* из `k` *компонент необходимо расставить* **`k - 1` столбцов**.

Поскольку *каждый набор содержит не менее одного объекта*, *столбец* можно разместить *только между двумя звёздами* (*наборы* `|★★|★★★` и `★★||★★★` нам *не подходят*). Тогда *между* `n` *звёздами существует* ровно **`n - 1` ячеек**, в которые можно *разместить столбцы*. Например, если *обозначить ячейку символом* `•`, то *доступные ячейки обозначаются* `★•★•★•★•★`.

Таким образом, необходимо *разместить* `k - 1` *столбцов* в `n - 1` *ячеек*, иначе говоря, *выбрать* `k - 1` *элементов* из `n - 1`, что равно *числу сочетаний из `n - 1` по `k - 1`*, то есть **С(n-1,k-1)**.

#### Замечание

Если *сложить все композиции натурального числа* `n` из `k` *компонент* от `k = 1` до `k = n`, получится **число композиций натурального числа `n`**, которое *равно* **`2^(n - 1)`**.

### Теорема #2 (число слабых композиций натурального числа n из k компонент)

«Для *любой пары натуральных чисел* `n` и `k` *число кортежей*, *состоящих* из *`k` целых неотрицательных чисел*, *сумма* которых даёт *`n`*, то есть **число слабых композиций натурального числа `n` из `k` компонент**, *равно числу мультимножеств мощности* `k - 1`, *выбранных* из *множества мощности* `n + 1`, то есть *равно* **`(( n+1, k-1 )) = С(n+k-1, k-1)`**.»

Например, для `n = 5` и `k = 2` существует `C(n+k-1, k-1) = C(6, 1) = 6` *слабых композиций*:  
```
5 + 0
4 + 1
3 + 2
2 + 3
1 + 4
0 + 5
```

Например, для `n = 5` и `k = 3` существует `C(n+k-1, k-1) = C(7, 2) = 21` *слабая композиция*.

#### Доказательство методом “звёзды и столбцы”

*Доказательство этой теоремы* очень *похоже* на *доказательство предыдущей*. *Натуральное число* `n = 5` так же *представляется набором объектов* `★★★★★`, а в случае *композиции* этот *набор объектов разделяется* на *несколько наборов столбцами* `|`. 

*Основное отличие* заключается в том, что в *слабой композиции* в качестве *компонент* могут использоваться *нули*, а значит *наборы могут* быть *пустыми* (могут *не содержать объектов* `★`). Например, *обозначение* `|★★|★★★` *соответствует композиции* `0 + 2 + 3`, а *обозначение* `★★||★★★` *соответствует композиции* `2 + 0 + 3`. 

Итак, чтобы *составить композицию* из `k` *компонент*, мы, как и прежде, *расставляем* **`k - 1` столбцов**. 

<!--
Если не понятно, почему так, то представьте, что вы режете торт: 1 надрез даёт 2 кусочка, 2 надреза - 3 кусочка и так далее.
-->

Поскольку *набор может не содержать объектов*, *столбец* `|` можно разместить *где угодно*. Тогда *между* `n` *звёздами существует* ровно **`n + 1` ячеек**, в которые можно *разместить столбцы*. Например, если *обозначить ячейку символом* `•`, то *доступные ячейки обозначаются* `•★•★•★•★•★•`. Более того, в *одну ячейку* может быть *размещено несколько столбцов*. Например, `★★||★★★`.

Таким образом, необходимо *разместить* `k - 1` *столбцов* в `n + 1` *ячеек*, причём *одна ячейка* может *содержать несколько столбцов*. Иначе говоря, необходимо сделать *множественный выбор* `k - 1` *элементов* из `n + 1`, что равно *числу сочетаний с повторениями из `n + 1` по `k - 1`*, то есть **`(( n+1, k-1 )) = С(n+k-1, k-1)`**.

### Решение задач методом “звёзды и столбцы”

*Доказанные выше теоремы* позволяют *решать* многие важные *комбинаторные задачи*. Например, *деление пирога* или *деление прибыли* между *несколькими людьми*, *расстановка вещей* на *полки*, а также многие другие задачи. Все *эти задачи решаются* либо использованием *доказанных формул*, либо *аналогично* тому, как *доказывались теоремы*.


Примерная *формулировка задач* для *теоремы #1*:  
«Имеется `n` *одинаковых объектов* и `k` *различных ячеек*. Сколько существует *способов разместить объекты в ячейки*, если *каждая ячейка содержит не менее одного объектаф*»

Примерная *формулировка задач* для *теоремы #2*:  
«Имеется `n` одинаковых объектов и `k` различных ячеек. Сколько существует *способов разместить объекты в ячейки*, если *каждая ячейка* может *содержать ни одного, один* или *несколько объектов*?»














.
