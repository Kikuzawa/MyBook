## Отношение и его структура
- [Об отношении и его структуре](#об-отношении-и-его-структуре)
- [Атрибуты и их значения](#атрибуты-и-их-значения)
- [Заголовок отношения](#заголовок-отношения)
- [Тело отношения](#тело-отношения)


### Об отношении и его структуре

Понятие *отношения* в *реляционной модели данных довольно близко по смыслу* к понятию *отношения* в *теории множеств*. При этом *множествами* `X1, X2, ..., Xn` *выступают типы данных* `T1, T2, ..., Tn`, *являющиеся множествами по определению*. 

*Ниже* рассмотрим несколько *видоизменённое математическое определение*.

Пусть *имеются типы данных* `T1, T2, ..., Tn` (*не обязательно различные*), тогда **n-арным отношением** (англ. relation) `R` называют *подмножество декартового произведения* `T1 × T2 × ... × Tn`. Говоря другими словами, *отношение* - это некоторое *множество* (набор) *кортежей*, имеющих *одинаковую схему*, то есть *кортежей* `(t1, t2, ..., tn)`, *элементы* `t1, t2, ..., tn` которых *принадлежат типам данных* `T1, T2, ..., Tn` *соответственно*.

На деле же *отношение реляционной модели данных имеет* особую *структуру* и *не является множеством* как таковым. *Отношение* `R` *состоит* из *заголовка* `H` и *тела* `B`. Фактически, его можно *рассматривать* как *упорядоченную пару заголовка и тела*: `R = (H, B)`.

### Атрибуты и их значения

**Атрибут** (лат. attributio - признак) в *философии* - *отличительный, существенный, неотъемлемый признак* (черта, свойство) *предмета* или *явления*. *Атрибуты независимы* друг от друга, то есть *один атрибут не может повлиять на другой*.

В *программировании* **атрибут** (англ. attribute) представляет собой *свойство* некоторого *объекта*, *элемента* или *файла*.


*Объект характеризуется* и *определяется* *значениями своих атрибутов*.


*Атрибут объекта* обычно *состоит* из **имени атрибута** (name) и **значения атрибута** (value). 

Например, *“цвет глаз”* можно назвать *атрибутом человека*, тогда *“карий”, “зелёный”, “голубой”* и *“серый”* - некоторые из возможных *значений атрибута*.



В *реляционной модели данных* некоторый *класс объектов* *представляется отношением* и *характеризуется конечным множеством атрибутов*, а *информация (данные) о конкретном объекте хранится* в *виде набора значений атрибутов*. В этом и кроется *главное различие между отношением* (из *реляционной модели данных*) и *множеством* (из *теории множеств*): *множество* обычно *представляет* собой *набор наименований объектов* в то время, как *отношение представляет множество характеристик объектов*. 


В *реляционной модели данных* *все значения одного атрибута принадлежит одному конкретному типу данных*. Например, *нельзя*, чтобы *атрибут имел числовые* и *строковые значения одновременно*.


Фактически, *атрибут* в *реляционной модели данных* можно *рассматривать* как *упорядоченную пару* `(a, t)`, где `a` - *название атрибута*, `t` - *название типа данных*, которому *принадлежат значения атрибута*. В таком случае *значение атрибута* можно *рассматривать* как *упорядоченную тройку* `(a, t, v)`, где `v` - *значение атрибута* `a` *типа* `t`.


### Заголовок отношения

Говоря простыми словами, *заголовок отношения состоит* из *атрибутов*.

**Заголовком** (*схемой*) `H` (англ. header) **отношения** `R` называют *множество упорядоченных пар* `(a, t)`, где `a` (англ. attribute) - *название атрибута*, `t` (англ. type) - *название типа данных* (*не сам тип данных*, являющийся множеством), которому *принадлежат значения атрибута* `a`.

Таким образом, *заголовок n-арного отношения* имеет вид: `H = { (a1, t2), (a2, t3), ..., (an, tn) }`.

Пример *заголовка* для *отношения между множествами* `N`, `J`, `D`: `H = { (Имя, string), (Профессия, string), (Дата, date) }`.


*Число атрибутов* `n` называется **степенью отношения** или **арностью отношения**. 

*Отношение* с *одним атрибутом* называют **унарным**, с *двумя* — **бинарным**, с *тремя* - **тернарным** и так далее.


Поскольку *множество не может содержать одинаковые элементы*, а *типы данных* в заголовке могут *повторяться*, **названия атрибутов** должны быть **уникальными**. *Иначе возможна* была бы *ситуация* `H = { (Дата, date), (Дата, date) }`, что *недопустимо для множеств*.

**Заголовки** двух **отношений совпадают**, если *совпадают* их *количество атрибутов, все названия атрибутов* и *типы данных атрибутов*. 


### Тело отношения

Говоря простыми словами, *тело отношения* - это *множество кортежей*, *содержащих значения атрибутов*.

Итак, *заголовок представляет* собой *множество атрибутов* `(a, t)`: `H = { (a1, t1), (a2, t2), ..., (an, tn) }`.


*Значение атрибута* должно быть *привязано* к самому *атрибуту*, поэтому оно *представляется упорядоченной парой* `((a, t), v)` или, что то же самое, *упорядоченной тройкой* `(a, t, v)`, где `v` (англ. value) - *значение атрибута* `a` *типа* `t`. Но, поскольку *название атрибута уникально*, а *тип данных привязан* к нему *парой* в *заголовке* отношения, *значение атрибута* можно *представить* ещё *проще* - *упорядоченной двойкой* `(a, v)`.

Пусть имеется `n` атрибутов `a1, a2, ..., an`. Тогда **тело** `B` (англ. body) **отношения** `R` - это *множество кортежей* `k = ((a1, v1), (a2, v2), ..., (an, vn))`: `B = { k1, k1, ..., km }`. 

*Количество упорядоченных пар* `(a, v)` в *кортеже* `k` *должно совпадать* с *количеством атрибутов* (*степенью отношения*) `n`.

Число `m` (*число кортежей* `k`) называется **кардинальным числом отношения** или **кардинальностью отношения**.

Стоит отметить, что, *несмотря на математическое определение кортежа* и *начальное определение автора*, *кортеж* `k` *не обязательно должен быть упорядочен*. Действительно, *значения напрямую привязаны к* своим *атрибутам упорядоченными парами* и в *случае перестановки* `((a2, v2), (a1, v1))` эта *связь не нарушается*. Более того, сами *атрибуты в заголовке не упорядочены* по *определению множества*, а значит *упорядоченность значений избыточна*. *Упорядоченность* *имела бы смысл*, если бы *кортежи* `k` *имели вид*: `(v1, v2, ..., vn)`. Далее *при необходимости* в *упорядоченности*, чтобы *не путать упорядоченные математические кортежи* и *неупорядоченные кортежи* `k`, будем *использовать понятия “упорядоченный набор”*, *“упорядоченная пара”* и *“упорядоченная тройка”*.

Пусть *имеется заголовок* `H` вида:
```
H = { (Имя, string), (Профессия, string), (Дата, date) }
```

Ниже представлен *пример тела* `B`, *соответствующего заголовку* `H`:  
```
B = {
  ((Имя, Сара), (Профессия, программист), (Дата, 2019)),
  ((Имя, Рози), (Профессия, дизайнер), (Дата, 2019)),
}
```


Графически, *упорядоченная пара* `(a, v)` - одна *ячейка таблицы*, а *кортеж* `k` - *строка таблицы*.
