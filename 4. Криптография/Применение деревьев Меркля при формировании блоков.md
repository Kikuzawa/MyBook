Принцип построения дерева
- **Листьями дерева** являются хэш-коды всех транзакций, которые требуется собрать в единый блок
- Хэш-коды транзакций группируются попарно
- Из каждой пары вырабатывается новый хэш-код
- Если количество транзакций в блоке нечетное, то последняя транзакция дублируется
- алгоритм повторяется, пока не останется один хэш-код - он становится **корнем**

Корень помещается в блок для проверки его целостности

Дерево Меркля для шести транзакций в блоке

![[Pasted image 20241010154606.png]]

Дерево Меркля для пяти транзакций в блоке<br> 

![[Pasted image 20241010154622.png]]

**Преимущества алгоритма**

- При нахождении транзакции, котороя уже была выделенна в другой блок нет необходимости пересчитывать весь текущий блок
    - необходимо пересчитать только хэш-коды тех ветвей дерева, в которых использовалась удаленная транзакция
- Клиентам могут самостоятельно проверять, была ли транзакция включена в блок
    - на основе значения корня Меркля из заголовка блока и списка промежуточных хэш-кодов дерева


